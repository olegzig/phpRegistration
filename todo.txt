Понятия не имею как изменить is-valid который был после сабмита. Разве что ручками стили менять (а не классы)

Надо переписать взаимодействие с JS. Нельзя юзать donjajo/php-jsondb. Наверное. Это же фреймворк?
Insecure sites can't set cookies with the 'secure' directive. - но всё работает

php to 7.4